<html>

<head>
    <title>
        Gel Canvas Demo
    </title>
    <script src="fabric.js"></script>
    <script src="gelConfigurations.js"></script>
    <script src="gelCanvas.js"></script>
</head>

<body style="background: #ddd">
    <h1>Gel Canvas Demo</h1>
    <div id="controls" style="width: 50em">
        <div id="btnBar">
            <button type="button" onclick="gelCanvas.addImageFromElement('sampleGel')">Add Sample Image from img</button>
            ||
            <input type="file" id="imgLoader" onchange="gelCanvas.addImageFromFile(event)" />
            <hr>    
            <button type="button" onclick="gelCanvas.reset()">Reset Canvas</button>
            <button type="button" onclick="gelCanvas.duplicate()">Duplicate Selected</button>
            <button type="button" onclick="gelCanvas.delete()">Delete Selected</button>
            <hr>
            <button type="button" onclick="gelCanvas.uploadAsImage(doWithData)">Upload to Server</button>
        </div>
    </div>
    <br>
    <div id="container" style="border: 1px solid #111; width: 800px; height: 600px; position: relative; user-select: none;">
        <canvas id="gCanvas" />
    </div>
    <img id="sampleGel" src="gel-400x300.jpg" hidden/>
</body>
<script>
    gelCanvas.init('container', gelConfigurations["novex"], [
        {text: "Expression Batch 1", color: "#a23"},
        {text: "Expression Batch 2", color: "#6af"},
        {text: "Expression Batch 3", color: "#2a4"}
    ]);

    function doWithData(data) {
        alert ("Data: \n" + data);
    }
</script>

</html>